# 리펙토링

## 리펙토링의 중요성

### 집중력

인간의 집중력은 한계가 있다. 집중력은 개인의 타고난 능력이 좋은 문제도 있지만, 수면 시간, 관심도, 지식 등에 따라서 집중도가 달라질 수 있다.

해석하기 어렵거나, 의도를 파악하기 어려운 경우, 또는 잘못 작성된 코드가 많을 경우, 많은 집중력과 의도 해석을 위한 분석이 필요하기 때문에 집중력의 저하를 유발할 수 있다. 리펙토링을 통해서 좋은 코드를 작성한다는 것은, 단순히 명확화를 통해 코드의 실수나 잘못된 코드를 만드는 것 이상으로 집중과 몰입을 위해 해야 할 일이다.

## 리펙토링의 단계

메인테넌스가 어려운 코드를 한 번에 리펙토링하면 좋겠지만, 실무에서는 시간이 부족하거나, 사양을 확실히 알 수 없기 때문에 급진적인 리펙토링은 불가능하다.

점진적으로 리팩토링을 해야 하는데 네이밍 개선, 타입 개선, 개념 분리의 순으로 리펙토링을 할 수 있을 것이다.

## 네이밍

먼저는 의도를 명확히 나타내는 이름을 짓는 것이 중요하다. 어떤 의도로 작성된 코드인지 파악하기 쉽지 않은 문제가 있고, 한 단위 기능이 어떤 영향력을 갖는지 파악할 수 있도록 하여, 개발자의 의도를 드러내는 명칭을 붙이도록 하자.

## 타입

php, python, 자바스크립트 등의 인터프리터 언어의 경우, 타입 없이 코드를 작성할 수 있고 이 때문에 타입이 없는 레거시 코드가 양산되어 온 문제가 있다. 코드에 타입을 점진적으로 추가하는 것을 통해서 IDE의 정적 분석 및 해당 타입이 정의된 부분 사용한 부분으로 간단히 이동할 수 있어서, 무언가를 수정할 때, 빠지는 부분을 방지할 수 있다는 장점이 있다.

## 개념

기능을 어떻게 분류하고 나눌 것인지에 관한 것으로, 도메인을 좀 더 이해하기 쉽게 하기 위한 개념적 만드는 것을 의미한다.

어떤 의도와 개념으로 코드가 만들어 졌는지, 사양서가 없을 때도 코드를 통해서 코드의 의도를 이해할 수 있도록 할 수 있게 하고, 사양서가 있다면, 사양서와 코드를 비교했을 때 유사성을 통해서 이해하기 쉬워야 한다.

레거시 코드의 경우, 하나의 기능에 여러 개념이 섞여있고, 특정 문제를 해결하기 위해서, 개념을 나누기 보다는 트릭을 사용한 코드를 만드는 경우가 있으므로, 어떤 기능을 수정했을 때 해당 기능과 연결된 코드에 영향을 주는 문제가 발생할 수 있다.

레서시 코드는 단순히 코드의 문제 뿐만 아니라, 개념적으로 잘 정의되지 않은 로직이 많기 때문에, 코드를 변경했을 때 이를 충분히 검증할 수 있다면 (운용하는 쪽 사람들도 로직의 검증에 참여한다면) 개념적으로 잘 정의하고 나누는 방향으로 코드를 작성하여 개선하도록 한다.
