# 태스트 사양서

## 인적 자원 배분

나라 지역 별로 개발자를 많이 뽑을 수 있는 곳도 있지만, 개발자를 많이 뽑을 수 없는 곳도 있다. 개발자를 적게 뽑아야 한다면 개발자는 개발하는 코드에 좀 더 집중을 하고, 비 개발자 인원을 동작 확인에 동원할 것이다. 반면 개발자를 충분히 고용할 수 있는 여건이라면, 오히려 테스트 코드 작성을 독려할 것이다.

어떤 인원이 테스트를 확인하는데 더 저렴하고 여유가 있는 리소스인지 판단하여, 어떤 인원을 좀 더 테스트에 할당할지를 정하는 편이 좋다. 회사의 팀 구성원, 부서별 인원 배분, 채용 전략 등에 의해 인원 구성이 달라질 수 있기 때문에 상황에 따라 개발 리소스를 비 개발자들에게 전가하는 전략을 취하는 편이 유리하다.

## 테스트 사양서의 목적

기본적으로 소프트웨어의 동작을 확인하는 것은 개발자 뿐만 아니라, 소프트웨어를 운용하는 사람들도 참여한다. 개발자만 확인을 한다면 테스트 코드만으로 충분하겠지만, 소프트웨어를 운용하는 사람들이 직접 확인을 하고, 피드백을 주기 위해서는 운용하는 사람들도 동작을 확인해야 한다. 결국 제품의 최종 릴리스까지의 확인은, 개발자 뿐만 아니라 개발을 의뢰한 담당자도 책임을 져야 하는 부분이기 때문에 모두의 확인이 필요하다.

개발자는 의뢰자의 티켓을 내용을 확인하고, 코드를 설계하고, 작성하며, 테스트 코드를 정의하고 기존 코드를 읽는 것을 통해서 동작이 어떻게 이뤄져야 할지를 알 수 있지만, 비 개발자는 이러한 사항들을 모를 수 있다. 내부 코드의 변경이 어떤 영향을 초래하는지 알 수 없기 때문에 의뢰자는 자신이 의뢰한 기능의 동작에 대해서만 확인을 한다.

## 코드의 변경이 초래하는 모든 부분을 확인

새로운 기능이나 기존 기능의 버그 등의 문제를 의뢰하는 쪽에서는 해당 문제만 해결하면 동작의 검증이 끝난 것으로 생각하지만, 여러 코드에서 공통적으로 사용하는 코드는 의뢰한 부분의 동작 뿐만 아니라 다른 부분의 동작에도 영향을 줄 수 있다. 따라서 개발자가 어떤 동작에 영향을 미치는지 확인을 하고 어떤 동작도 확인을 해야 한다고 알려 줘야 한다. 의뢰자는 자신이 의뢰한 기능과 다른 기능에 대해서는 이해가 적거나 운용 방법을 모를 수 있기 때문에 어떻게 태스트를 할 것인지에 대한 가이드라인이 필요하다.

코드의 변경으로 수반되는 의뢰한 동작 이외의 동작을 확인해 봐야 한다고 알리기 위해 테스트 사양서를 만들어야 하고, 의뢰한 기능이 아닌 다른 기능을 어떻게 테스트 할지 알 수 있게 하기 위해 테스트 사양서를 만들어야 한다. 티켓은 의뢰한 부분에 대한 확인으로 끝나기 때문에 별도의 테스트 문서는 반드시 필요하다.

## 테스트 코드

### TDD

TDD는 코드의 동작을 확인하기 위한 코드를 조금 작성하고, 이를 통과하기 위한 코드를 실패를 반복해 나가면 통과하는 코드를 작성하고 테스트가 통과되면 코드를 리펙토링 하는 단계를 반복하는 단계를 거친다. 실패를 red, 성공을 green, 리펙토링을 refactor라고 부른다. red, green, refactor 단계를 반복하면서 점차 사양에 맞는 코드로 변경해 나가는 것이다.

모든 테스트 코드를 완벽하게 만드는 것은 현실적이지 않기 때문에 사양을 만족하는 적당한 정도의 동작하는 코드를 만드는 선에서 TDD로 코드를 만들며, 나중에 추가적인 요구사항을 처리할 때 테스트와 코드를 추가하고 개선하는 방식을 쓴다. 그렇기 때문에 확인해야 할 모든 케이스에 대한 테스트가 항상 만들어지는 것은 아니다.

TDD는 동작하는 코드를 만들기 위한 방법일 뿐, 모든 특수한 케이스까지의 코드가 만들어지지 않은 경우가 있으므로, TDD로 만들어지는 코드가 사양을 다 나타낸다고 생각하지 않는 접근 방식이 필요하다.

### 유닛 테스트와 통합 테스트 코드

유닛 테스트와 통합 테스트는 여러 특수한 케이스에 대해 성립하는 코드를 작성해야 한다. TDD가 사양을 만족하는 동작하는 코드를 실행하기 위한 수준으로 작성되는 것에 반해, 유닛 테스트와 통합 테스트를 위한 코드 작성은 사양을 불만족하는 모든 잘못을 검증하기 위해 작성한다.

문제는 어느 정도 테스트 코드를 작성해야 하는가?라는 문제를 마주하게 된다는 것이다.

### 티켓별 테스트와 기능별 테스트

일반적으로 티켓별로 테스트 사양서를 작성하지만, 개인적으로는 티켓별로 사양서를 작성과 함께 기능별 테스트 사양서를 작성하는 방법을 사용한다. 어떤 기능을 수정하는데 공통적으로 확인해야 할 부분에 대해 티켓을 작성할 때마다 다시 쓰는 것은 시간이 들어가는 작업이다. 티켓을 수정할 때 영향이 있는 기능에 대해서는 기능별 사양서를 통해서 확인하고, 티켓별로 특별히 확인을 해야 하는 것이 있다면 티켓에 추가를 한다.
