# 타입 주도 설계

## 대수적인 프로그래핑

대수학이란 직접적인 수를 대신한 문자를 사용해서 어떤 식을 만드는 것을 의미한다. 수를 대신한 문자를 통해서 수들 간의 관계성을 나타낼 수 있고, 방정식을 만들면 특정 수의 범위에 대해 특정한 관계성을 만족한다는 것을 표현할 수 있다.

프로그래밍에서도 대수란 변수의 범위에 대해서 각각의 시그니처의 코드들의 연관 관계를 통해서 어떤 로직의 변수들 간의 관계성을 만들어 낼 수 있다. 수학에서 변수의 범위가 자연수, 정수, 소수, 음의 정수, {x | x는 ... 조건}, a <= x < b 등으로 나타낼 수 있는 것에 반해서, 프로그래밍에서 대수의 범위는 타입이란 것으로 타나낸다.

### 좀 더 엄밀한 정의

대수를 영어로는 argebric이라고 하는데, 카테고리 이론에 기반을 두고 있는 수학적인 개념이다.

카테고리를 프로그래밍 언어에서는 타입으로 표기하고, 변수의 값은 하나의 타입이지만 변수가 가지는 타입의 범위가 두 가지 이상인 경우를 타입의 합으로, 변수가 가지는 타입이 둘 모두의 타입으로 구성되어 있으면 곱으로 본다.

- 유니온 타입 (합 타입) : A 타입 또는 B 타입 또는 C 타입의 여러 타입으로 하나의 변수를 나타낼 수 있다.
- Enum 타입 (합 타입) : Enum의 각 case는 하나의 타입이다. 하나의 Enum은 여러 case로 구성되어 있고 이들 case 중 하나가 변수의 값이 된다. Enum의 하나의 case는 값이자 타입이다.
- 튜플 (곱 타입) : 튜플은 php의 배열과 유사하지만 데이터의 길이가 정해져 있고, 각 원소를 구성하는 타입이 정해져 있으며, 선언된 값을 변경할 수 없는 특성을 가진 대상이다. 예를 들어 `[Person, Company]`으로 타입이 구성되어 있다면 `Person` 타입과 `Company` 타입이 하나의 원소를 구성하고 이들을 베이스로 한 값 `[Person1, Company1]`, `[Person2, Company2]`, `[Person3, Company3]`... 원소의 집합이 튜플으로 여러 타입이 복합적으로 하나의 값을 만든다.

## 타입리스 언어의 문제

타입이 없는 언어의 문제는 코드가 처음 생성된 부분부터 데이터가 어떻게 변했는지를 추적해야 한다.

타입을 사용하면 값의 생성을 처음부터 추적하지 않고, 코드의 일부분만으로 변수가 가진 타입을 알고, 해당 타입에 대한 로직을 만들면 되기 때문에 코드를 해석하는데 피로도가 줄어든다.

## 타입을 사용하는 것의 장점

컴파일러 및 정적 분석은 타입 검사를 한다. 이는 런타임에 직접 실행을 하지 않고서도 코드에서 타입 문제가 있다는 것을 알려준다.

타입이 없는 동적 언어의 경우, 전체 코드의 타입을 검사하지 않기 때문에 코드를 변경했을 때, 시그니처 변경이 이뤄지면 이를 사용한 모든 코드를 실행해서 오류가 발생하지는 않는지 확인을 해야 한다.

컴파일러 및 정적 분석으로 분석 가능한 코드를 만든다면, 코드의 타입만을 검사하여 타입 안정적인 코드를 작성할 수 있다.

반환값이 A와 B라는 두 타입에서 A와 C라는 두 가지 타입으로 변경 했을 때, 연결되는 코드는 A와 B에 대한 처리를 하기 위해 분기문을 구성해야 하는 것에서 B에 대한 처리 로직을 지우고 C에 대한 처리 로직을 만드는 작업을 해야 한다. 만약 연결되는 코드를 변경하지 않는다면, 컴파일러나 정적 분석 툴은 문제가 있다고 지적한다.

## 하나의 변수가 가질 수 있는 타입

변수는 대수적인 특징인 값의 범위를 갖는다. 기본적으로 값의 범위는 타입으로 나타내고, 동적 타입 언어에서 타입을 추가한 경우 하나의 변수는 여러 타입을 가질 수 있다. (이를 유니온 타입이라고 한다.)

유니온 타입이 없는 언어라고 하더라도 상속 관계를 통해서 포함 관계를 만들 수 있기 때문에 하나의 변수가 여러 타입을 갖는 것을 표현할 수 있다.
