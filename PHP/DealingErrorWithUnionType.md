## 유니온 타입으로 예외를 다루기

### 예외란 무엇인가?

예외란 어떤 문제가 발생했을 경우, 예외를 포착하여 발생한 문제를 별도의 방법으로 해결하기 위한 방법으로 존재한다.

물론 예외 처리를 발생시키지 않고 여러 분기문을 작성해서 처리하는 방법도 있지만, 예외를 사용하는 이유는 코드의 관심사 분리를 위해서 사용한다. 예외는 별도의 방식으로 처리해야 하고 기존의 흐름에서 처리하는 것과 별도의 관심사로 처리 되는 경우가 있을 수 있다. 이런 경우 예외를 사용하여 클래스가 담당하고 있는 역할 이외의 부분에서 예외를 처리하도록 하기 위해서 사용한다.

### 시그니처

시그니처란 함수나 클래스 등의 심볼에 대해 함수명, 파라메터명, 파라메터 타입, 반환 타입 등의 정보를 의미한다.

기본적으로 코드는 시그니처의 정보를 토대로 작성된다. 시그니처는 코드의 사양서라고 할 수 있으며, 이 사양에 맞게 연결되는 코드를 작성한다. 시그니처에 드러나지 않은 정보가 프로그램을 동작시키는데 큰 영향을 가진다면, 예상치 못한 동작의 코드를 작성할 가능성이 높아진다.

OOP의 다형성, 함수형 프로그래밍은 시그니처의 정보를 기반으로 코드에 여러 제약을 가한다. 시그니처에 나와있지 않은 정보를 이용해서 코드를 짠다면, 코딩의 각종 프렉틱스를 무시할 수 있기 때문에 좋은 코드라고 할 수 없다.

### 예외는 시그니처가 아니다

throw는 예외를 던지는 코드인데 이는 시그니처에 표시되는 정보가 아니다. 클래스나 함수 등의 코드를 사용할 때는 이들의 시그니처 정보에 의존하여 코드를 작성하게 되는데 예외는 시그니처에 표현되지 않은 정보이기 때문에 어떤 코드의 시그니처를 사용할 때 예외처리를 해야한다는 정보가 누락되기 쉽다.

예외를 시그니처에 추가하게 되면, 예외를 헨들링 하는 것을 누락하는 일이 적어진다.

### PHP에서 예외 표기

PHP에서 예외는 주석으로 표기한다. IDE나 정적 분석 도구는 주석 정보를 이용해서 예외처리가 필요하다는 것을 알려준다.

```php
/** @throws CustomException */
public function someFunction(): void
{
    throw new CustomException();
}
```

### 코틀린 언어의 예

코틀린에서는 Arrow라는 함수형 라이브러리가 있다. 많은 코틀린 프로젝트에서 예외처리를 하기 위해 이 라이브러리를 사용하는데, either을 함수의 반환값으로 사용해 에러를 처리한다.
