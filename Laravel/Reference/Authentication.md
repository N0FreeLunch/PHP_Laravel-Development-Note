# Authentication

## 인증
- 라라벨 설치 시 기본 인증이 포함되어 있다.
- config/auth.php에서 라라벨을 인증에 관한 옵션을 설정할 수 있다.

## 라라벨의 기본 인증 시스템
- guards 와 provider 로 구성 됨
### guards
#### session guard
- 데이터베이스에 서버에서 관리하는 세션 스토리지를 형성하고 프론트에는 쿠키에 인증을 위한 쿠키 인증세션을 전달하여 인증하는 방식을 사용한다.

#### token guard
- API 토큰을 통한 인증을 함

### provider
- 데이터베이스의 세션 스토리지 저장소에서 사용자를 찾을 수 있게 만듦


## 기본 인증 모델
### Eloquent 기반 모델
- 
### 쿼리 빌더 기반 모델
- 

## 인증 데이터 베이스 설정
### password
- 패스워드 컬럼은 최소 60자 이상. 기본값은 255
### token
- null을 허용하는 100자리 문자열
- 로그인 시 "remember me" 옵션을 선택한 사용자에게 발행한 토큰을 저장


## 인증의 흐름
1. 브라우저의 로그인 form을 통해 ID, PASS를 입력
2. 서버에서 입력한 데이터가 로그인을 허용하기에 적절한지 비교한다.
3. 로그인을 허용하기로 했다면 인증 세션을 만들어 데이터베이스에 저장한다.
4. 로그인 request에 대한 response로 쿠키 값을 전송할 때, 인증 세션 값을 포함한다. 이 때 세션 ID도 포함하여 전달한다.
5. 로그인 후 사용자가 리퀘스트를 전달할 때 리퀘스트에 포함 된 세션 쿠키가 라라벨 어플리케이션에 수신 된 후
6. 라라벨 애플리케이션은 세션 ID를 기반으로 세션 데이터를 검색하고 인증 정보가 세션 저장소에 저장되었다는 것을 확인하면 인증으로 판단한다.

### 세션 ID를 사용하는 이유
- 추측이지만, 세션은 무작위 키 값으로 탐색 기간이 걸릴 것으로 예상 됨. 따라서 자원의 소모가 적고 빠른 검색을 할 수 있는 ID 기반 검색을 사용한 것으로 판단 된다.


## API 인증
- 기본적으로 쿠키를 사용하지 않는다. 쿠키를 무시한다.

## Reference
https://laravel.kr/docs/8.x/authentication#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0
