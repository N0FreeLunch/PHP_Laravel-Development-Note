## 큐(Queues)
- 큐는 순차적인 처리를 담당한다. 작업들을 순서대로 적재하고 적재 된 순서대로 실행하는 기능을 담당한다.

## 큐를 사용해야 할 때
- 웹 서버는 클라이언트의 요청에 대한 응답을 제공해야 한다. 하지만 요청을 받고 응답을 만들어내는데 오랜 시간이 걸린다면 유저에게 나쁜 경험을 제공하게 된다. 예를 들어 유저는 기능이 제대로 동작하지 않는 것으로 느끼고는 페이지를 떠나거나 새로 고침을 하게 되고 클라이언트가 응답을 받지 못해 후속 처리가 제대로 이뤄지지 않을 수 있다. 따라서 유저에게는 가능한한 빠르게 리스폰스를 보내어 유저의 경험을 좋게 유지하고 시간이 걸리는 작업은 백그라운드 작업으로 처리하고 유저에게는 백그라운드 처리의 진행상황을 보여주는 것이 좋다.

## 라라벨에서 지원하는 큐 방식
- Amazon SQS
- Redis
- RBDMS

## 큐 관리자
- 라라벨의 큐 작업을 확인할 수 있는 대쉬 보드가 제공된다.
- 라라벨 호라이즌을 참고할 것

## 커넥션과 큐

## 다중 작업
- 큐가 순차적으로 작업을 처리하기 때문에 하나의 작업이 처리되고 다음 작업이 처리 되기까지 대기 시간이 필요하다. 만약 작업을 실행하는 도주에 시스템의 리소스가 남는다고 하면 다른 작업 실행하여 시스템의 리소스를 사용하는 것이 하드웨어 사용 효율을 높일 수 있다. 따라서 큐에 적재된 작업과 순서의 영향이 없는 작업은 따로 실행하여 시스템 리소스를 최대한 사용하는 것이 유리하다. 그런데 멀티 작업의 최대 갯수는 스레드의 2배 정도가 적당하다는 의견이 있다. 결국 작업의 최대 갯수를 조절을 해야 하는데 이를 위해서는 작업을 임의로 실행하게 만들면 안 된다.

## 멀티 큐
- 애플리케이션의 다양한 요구사항을 처리하기 위해서는 작업의 순차적 처리가 중요한 여러개의 작업 그룹이 있을 수 있다. 이 작업 그룹 각각에 속한 작업은 그룹 내의 다른 작업과의 순차적인 처리를 요구한다.

## 멀티 큐의 우선순위
- 여러개의 큐를 운용하다 보면 우선적으로 처리해야 할 큐 작업이 존재할 수 있다.


```
use App\Jobs\ProcessPodcast;

// This job is sent to the default connection's default queue...
ProcessPodcast::dispatch();

// This job is sent to the default connection's "emails" queue...
ProcessPodcast::dispatch()->onQueue('emails');
```
