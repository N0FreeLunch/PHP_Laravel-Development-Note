# Events

## observer란?
- 대상의 변화를 감지 하는 패턴
- observer 패턴에서 대상의 변화를 감지하기 위해서는 대상이 실행 될 때, 이벤트 리스너에 이벤트가 실행되었다고 알려주는 로직을 수행한다.
- 주기적으로 실행되는 루프 등을 사용하지 않고 대상의 변화를 감지 하기 위해서 대상이 변화할 때 감지를 하는 로직도 같이 실행하여 마치 감지하는 것 처럼 보이게 하는 것이 옵저버 패턴이다.

## laravel event란?

## laravel event를 쓰는 이유
> 애플리케이션의 다양한 레이어들이 서로 의존하지 않도록 만드는 멋진 방법을 제공할 수 있습니다.
- 아래 레이어의 모듈을 끌어와서 추가해서 적어 줘야 하는 부분을 이런 하위 계층의 레이어 의존성 없이 코드를 만들 수 있게 만든다. 

## 이벤트를 정의하는 디렉토리
- 디렉토리가 없는 경우 artisan console 명령어로 생성하면 없는 디렉토리가 생긴다.

#### 이벤트
- `app/Events` 폴더에 정의
- 하나의 이벤트는 여러개의 리스너를 가질 수 있다. : 하나의 이벤트에 대한 처리 로직을 다양한 방식으로 구현할 수 있다는 의미

#### 이벤트 리스너
- 이벤트 리스너 : `app/Listeners`에 정의
- 하나의 이벤트에 대해 서로 의존성이 없는 리스너를 구성 할 수 있기 때문에 하나의 이벤트에 대한 다양한 독립적인 비즈니스 로직을 리스너로 구현 가능

## 라라벨 이벤트를 활용한 시나리오
- 주문 배송 처리 후, 슬렉으로 알림을 보내는 시나리오.
- 주문의 배송 처리를 로직 이후에 처리 로직이 성공 했다면, 슬랙에 알림을 보내는 로직을 실행하도록 하는 방식을 사용한다.
- 이벤트를 사용하게 되면 주문 처리 로직에 슬랙 알람 기능을 그대로 결합시켜 코드를 쓰는 것이 아니라, 예를 들어 OrderShipped 이라는 명칭의 이벤트를 발생시키고 리스너가 이 이벤트를 받아서 슬렉 알람을 처리할 수 있다.

### 이벤트를 사용했을 때의 이점
- 하나의 발동 조건을 통해서 여러개의 비즈니스 로직을 동시에 작동 시켜야 할 경우가 있다. 발동 조건이 실행 되고 나서 수행되는 비즈니스 로직을 전부 적어 줄 것인지 아니면 이벤트를 발동을 한 번 하면 다양한 리스너들이 자동적으로 실행되게 할 것인지를 설정하기 위한 것이다. 
- 이벤트를  큐를 통해서 비동기로 작업을 수행하는 로직으로 업그레이드 하기 쉽다.

---

## Reference
- https://laravel.kr/docs/8.x/events
