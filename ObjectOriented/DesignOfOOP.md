## 객체 지향 디자인

### 클래스란?
클래스란 객체의 설계도를 의미한다. 클래스를 통해서 객체라는 것의 설계도를 만들고 설계도를 통해서 객체라는 인스턴스를 생성한다. 클래스에는 객체에서 사용할 멤버와 메소드를 정의할 수 있으며, 멤버와 메소드의 공개 범위(private, protected, public)등을 설정할 수 있다.

### 상속이란?
상속이란 이미 정의된 클래스와 동일한 메소드의 시그니처를 가지면서 추가된 시그니처의 메소드를 갖는 것을 의미한다. 상속된 클래스를 자식 또는 자손 클래스라고 부른다.

### 타입시스템
객체지향 언어에서는 클래스를 타입으로 사용할 수 있다. 어떤 변수가 타입으로 지정이 되면 해당 변수에는 해당 타입의 값만이 들어갈 수 있다. 클래스는 설계도이므로 값은 아니다. 클래스를 기반으로 인스턴스를 생성해야 값이 될 수 있다. 인스턴스는 클래스의 타입을 갖는다.

클래스를 기반으로 한 타입은 서브 타입이란 개념을 갖는다. 부모 클래스의 타입을 A라고 할 때, 상속을 받는 클래스로 만들어진 인스턴스 b는 A 타입의 변수에 할당 가능하다. 하지만 이 때 타입은 A 클래스로 정해져 있으므로 B 클래스에서 추가 된 멤버를 사용할 수는 없다.

타입으로 지정한 대상이 갖는 시그니처만을 사용해야 해당 시그니처에 연결하여 동작할 수 있는 코드를 작성할 수 있고, 시그니처에 의존하는 코드를 작성해야 지정한 타입의 클래스의 인스턴스 및 서브 클래스의 인스턴스를 다양하게 전달하고 교체하고 조합할 수 있다.

### 객체지향적 설계
객체 지향의 꽃은 다형성이라고 한다. 다형성의 특징 중 하나는 하나의 타입에 서브 타입을 여러번 바꿔가면서 할당할 수 있다는 것이다. 이렇게 여러 서브 타입을 바꿔서 사용하기 위해서는 클래스의 공개된 시그니처가 동일해야 한다. 자식-자손 클래스를 정의할 때 시그니처는 같지만 서로 다른 로직이 동작하기 위해 오러라이딩을 한다. 메소드가 오버라이딩 되면서 동일한 시그니처 제한 내에서 서로 다른 동작이 이뤄지는데 인스턴스를 사용하는 쪽에서는 동일한 시그니처를 사용하지만, 같은 시그니처의 메소드에 서로 다른 동작이 이뤄지는 대상들을 교체하면서 다양한 서브 클래스 간의 조합을 통해서 원하는 피쳐를 구현하는 것이 객체지향 설계이다.

### 다형성을 활용한 디자인의 예
동물 클래스가 있고 동물 클래스의 서브 클래스로 개 클래스가 있고 고양이 클래스가 있을 것이다. 모든 동물들은 먹을 수 있다. 개도 먹을 수 있고, 고양이도 먹을 수 있다. 그런데 개가 먹을 수 있는 음식과 고양이가 먹을 수 있는 음식은 다를 수 있다. 서로 다른 음식을 먹여야 한다는 제약사항이 있기 때문에 서로 다른 타입의 값을 받아야 한다고 생각이 들 수 있다. 이 때 동물이 먹을 음식도 음식 클래스의 서브 클래스로 개가 먹을 음식과 고양이가 먹을 음식을 만들면 개 인스턴스는 개가 먹을 음식 인스턴스를 받도록 코드를 만들고, 고양이 인스턴스는 고양이가 먹을 음식 인스턴스를 받도록 코드를 만들 수 있을 것이다.

### 무엇을 교환하게 할 것인가?
다형성을 활용하는 객체지향 디자인을 만들기 위해서는 교체할 대상을 별도의 클래스로 만들어야 한다.

### 다형성을 이용한 설계의 문제점
하나의 클래스를 만들 때, 해당 코드를 사용하는 요구사항이 변경될 때 사람들은 기존의 클래스를 수정하기 보다는 해당 클래스를 그대로 두고 영향을 최소화하고 상속해서 기존의 메소드를 오버라이딩 하여 원하는 사양을 구현하려고 한다. 다형성을 이용한 설계를 하려면 클래스의 범주(동물인지 고양이인지 개인지 시바견인지)를 결정하고 적절한 계층의 클래스를 만들어야 하는데 요구사항이 달라지면서 기존에는 적절했던 클래스의 계층구조가 바뀌어야 할 필요성이 있거나, 기존에 계층 구조를 염두하지 않고 설계한 경우 계층 구조를 만들어 주어야 하지만 그렇지 않고 그냥 상속을 사용하는 경우가 많이 있다. 다형성을 사용한 코드를 다형성을 이용한 설계에 익숙하지 않은 사람들에게 건네줄 때는 완성된 계층 설계의 클래스에서 적절한 클래스를 선택해서 상속 받아 구현할 수 있도록 지도가 필요하며 클래스의 구조적인 변화를 가능한 건드리지 않도록 하는 편이 나을 수 있다.

### 객체 지향 설계는 옳은가?
당장에 필요한 시그니처를 갖는 클래스만을 작성하면 되는데, 클래스를 만들 때 상속을 할 상위 클래스와 하위 클래스를 생각해서 정의해야 한다. 무엇이 근원이 되는지 상속의 계층 관계는 어떻게 되어야 하는지 등을 고려해서 만들어야 한다. 당장에 요구사항에 필요한 클래스를 만들기 보다는 다형성을 고려해서 그룹화 되는 상위의 클래스를 만들어야 하고, 해당 클래스를 상속시켜 구현해야 하는 등 당장의 필요한 것을 만들기 위해서 까다로운 추상화를 요구한다.

### 다형성을 사용한 점진적인 설계는 가능한가?
